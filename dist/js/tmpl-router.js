/**
*
*
* tmpl-router.js v1.0.0
* (c) 2016-2017 Blue
* https://github.com/azhanging/tmpl
* Released under the MIT License.
*
*
**/
!function(t,i){"function"==typeof _require?_require.defineId("tmpl-router",i):t?t.TmplRouter=i():{}}("undefined"!=typeof window?window:this,function(){function t(t){this.init(t)}function i(t){var i=this;this.alias={},l.each(t,function(t,e){var n=t.alias;i.router[e].view=[],i.router[e].temp=document.createDocumentFragment(),n&&(i.alias[n]=e)})}function e(){var t=this;window.hasTmplRouter||l.on(window,"hashchange",function(i){window.location.hash;t.hashChange(),a.preventDefault(i)})}function n(t){var i=this,e=this.config[t];l.isObj(e)&&l.each(e,function(t,e){i[e]=t})}var r={created:function(){},routerLink:"tmpl-router",activeClassName:"tmpl-router-active",routerView:"tmpl-router-view",data:{},methods:{},error:function(){}},o=null,a=null,l=null,s=null;return t.install=function(i){return this.installed?t:(this.installed=!0,o=i,a=new o({}),void(l=a.fn))},window.Tmpl&&t.install(Tmpl),t.prototype={constructor:t,init:function(t){this.config=l.extend(l.copy(r),t),this.router=this.config.router?this.config.router:{},this.tmpl=a,n.call(this,"methods"),n.call(this,"data"),i.call(this,this.config.router),e.call(this),l.run(this.config.mounted,this)},set:function(t){var e=this;return l.isObj(t)&&l.each(t,function(t,i){e.router[i]=t}),i.call(this,t),this},hashChange:function(){var t=this,i=window.location.hash.replace("#",""),e=l.getEls(this.config.routerLink),n=l.getEl(this.config.routerView),r=null;return""===i&&(i="/"),this.alias[i]&&(i=this.alias[i]),0===e.length?this:(l.each(e,function(e,o){var u=a.attr(e,"href").replace("#","");u===i?(t.getTmpl(e,i),r=t.router[i].cb,s&&(l.each(t.router[s].view,function(i,e){t.router[s].temp.appendChild(i)}),t.router[s].view=[]),n.appendChild(t.router[u].temp),l.each(a.children(n),function(i,e){t.router[u].view.push(i)}),a.addClass(e,t.config.activeClassName),l.isFn(r)&&r.apply(t,[e,n,i]),s=i):(t.router[u]&&(l.each(t.router[u].view,function(i,e){t.router[u].temp.appendChild(i)}),t.router[u].view=[]),a.removeClass(e,t.config.activeClassName))}),void(this.alias[i]||this.router[i]||this.config.error.call(this)))},go:function(t){l.isNum(t)&&history.go(1)},redirect:function(t){var i=location.href.split("#");"/"===t?location.href=i[0]:(i[1]=t,location.href=i.join("#"))},getTmpl:function(t,i){var e=this;if(!(this.router[i].temp.childNodes.length>0||this.router[i].view.length>0)){var n=a.attr(t,"tmpl-url"),r=a.attr(t,"tmpl-id");n?a.fn.ajax({url:n,success:function(t){e.router[i].temp.appendChild(a.create(t.tmpl))}}):e.router[i].temp.appendChild(a.create(a.html(l.getEl(r))))}}},t.version="v1.0.0",t});