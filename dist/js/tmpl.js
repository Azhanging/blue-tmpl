/**
*
*
* tmpl.js v1.0.2
* (c) 2016-2017 Blue
* https://github.com/azhanging/tmpl
* Released under the MIT License.
*
*
**/
!function(t,e){"function"==typeof _require?_require.defineId("tmpl",e):"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("tmpl",[],e):t?t.Tmpl=e():{}}("undefined"!=typeof window?window:this,function(){function t(){}function e(t){this.init(t)}function n(t){this.config=this.fn.extend(this.fn.copy(j),t),this.init()}function i(t,e,n){var i=t.className.split(" ");if(!this.fn.isObj(e)||"replaceBind"!=n&&"replaceClass"!=n)for(var e=e.split(" "),r=0;r<e.length;r++){var s=i.indexOf(e[r]);"bind"==n||"addClass"==n?s==-1&&i.push(e[r]):"unbind"!=n&&"removeClass"!=n||s!=-1&&i.splice(s,1)}else this.fn.each(e,function(t,e){var n=i.indexOf(e);n!=-1&&(i[n]=t)});return t.className=i.join(" "),this}function r(t,e,n){var i=this;this.fn.on(t,e,function(t){var n=t||window.event,r=n.target||n.srcElement,s=i.events[e];i.fn.each(s,function(t,e){i.hasClass(r,e)&&i.fn.each(t,function(t,e){t.apply(i,[n,r])})})}),this.eventType.push(e)}function s(){this.fn.isObj(this.config.router)&&(this.router=this.config.router)}function a(){this.events={},this.eventType=[]}function l(t){var e=this,n=this.config[t];this.fn.isObj(n)&&this.fn.each(n,function(t,n){e[n]=t})}function c(t){var e="\\/*.?+$^[](){}|'\"";return this.fn.each(e,function(e,n){t=t.replace(new RegExp("\\"+e,"g"),"\\"+e)}),t}function o(){var t=c.call(this,this.config.open_tag),e=c.call(this,this.config.close_tag);v=new RegExp(t+"[^=][\\s\\S]*?"+e+"|"+t+"=[\\s\\S]*?"+j.close_tag,"g"),y=new RegExp(t+"=[\\s\\S]*?"+e,"g"),b=new RegExp(t+"=","g"),_=new RegExp(t,"g"),E=new RegExp(e,"g"),x=/[\\\b\\\t\\\r\\\f\\\n]/g,S=/"/g,T=/<tmpl-include name=(\'|\")(\S*?)\1.*?>[\s\S]*?<\/tmpl-include>/g,C=/<tmpl-include file=(\'|\")(\S*?)\1.*?>[\s\S]*?<\/tmpl-include>/g,w=/<tmpl-include\s*?>[\s\S]*?<\/tmpl-include>/g,A=/<tmpl-block name=(\'|\")(\S*?)\1.*?>([\s\S]*?)<\/tmpl-block>/g,O=/<tmpl-layout file=(\'|\")(\S*?)\1.*?>[\s\S]*?<\/tmpl-layout>/g}function u(){N||f.call(this),p.call(this),d.call(this),h.call(this);var t=this.template.match(v),e=this.template.match(y),n=m.call(this),i=n.split(/___SCRIPT___|___ECHO_SCRIPT___/),r=[];t||(t=[]),e||(e=[]);var s=i.length>t.length?i:t;this.fn.each(i,function(t,e){i[e]='___.push("'+g(t)+'");'}),this.fn.each(t,function(e,n){y.lastIndex=0,y.test(e)?t[n]=e.replace(b,"___.push(").replace(E,");"):t[n]=e.replace(_,"").replace(E,"")}),this.fn.each(s,function(e,n){"string"==typeof i[n]&&r.push(i[n]),"string"==typeof t[n]&&r.push(t[n].replace(x,""))}),this.dom="var _this_ = this,___ = [];"+r.join("")+'return ___.join("");'}function h(){var t,e,n=function(){return N?T:C}(),i=this;this.template=this.template.replace(w,""),t=this.fn.unique(this.template.match(n)),e=t.toString().replace(n,"$2").split(","),0!==t.length&&0!==this.fn.trimArr(e).length&&t.length>0&&e.length>0&&e.length===t.length&&(this.fn.each(e,function(e,n){var r=new RegExp(c.call(i,t[n]),"g");if(N){var s=i.fn.getEl(e);s?i.template=i.template.replace(r,i.html(s)):i.template=i.template.replace(r,"")}else try{var a=R.readFileSync(e,{encoding:"UTF8"});i.template=i.template.replace(r,a)}catch(l){i.template=i.template.replace(r,"")}}),t=this.fn.unique(this.template.match(n)),t.length>0&&h.call(this))}function f(){p.call(this);var t=this.fn.unique(this.template.match(O)),e=t.toString().replace(O,"$2").split(",")[0],n=this,i=this.fn.unique(this.template.match(A)),r=R.readFileSync(e,{encoding:"UTF8"}),s=r.match(A),a=s.toString().replace(A,"$2").split(",");this.fn.each(a,function(t,e){var a=new RegExp(c.call(n,s[e]),"g"),l=!1;n.fn.each(i,function(e,n){A.test(e),t===RegExp.$2&&(r=r.replace(a,RegExp.$3),l=!0),A.lastIndex=0}),l||(r=r.replace(a,""))}),n.template=r}function p(){var t=this,e=this.constructor;this.fn.each(e.alias,function(e,n){t.template=t.template.replace(new RegExp(c.call(t,n),"g"),e)})}function d(){this.template=this.template.replace(O,"").replace(A,"")}function m(){var t=this.template.replace(y,"___ECHO_SCRIPT___").replace(v,"___SCRIPT___");return t}function g(t){return t.replace(x,"").replace(S,'\\"')}var v,y,b,_,E,x,S,T,C,w,A,O,N="undefined"!=typeof window;if(!N)var R=require("fs");var j={open_tag:"<%",close_tag:"%>",template:"",data:{},methods:{}};return t.prototype={isArr:function(t){return t instanceof Array},isObj:function(t){return t instanceof Object&&!(t instanceof Array)&&null!==t},isFn:function(t){return"function"==typeof t},isStr:function(t){return"string"==typeof t},isNum:function(t){return"number"==typeof t||/^\d*(\.\d*)?$/.test(t)},isEl:function(t){return t&&t.nodeType},on:function(){if(N)return"function"==typeof document.addEventListener?function(t,e,n){t.addEventListener(e,n,!1)}:function(t,e,n){t.attachEvent("on"+e,n)}}(),off:function(){if(N)return"function"==typeof document.removeEventListener?function(t,e,n){t.addEventListener(e,n,!1)}:function(t,e,n){t.detachEvent("on"+e,n)}}(),each:function(t,e){var n=0,i=t.length;if(this.isArr(t))for(;n<i;n++)e(t[n],n);else for(n in t)t.hasOwnProperty(n)&&e(t[n],n)},getEl:function(t){if(!t)return null;if(!this.isFn(document.querySelector))return document.getElementById(t);var e=document.querySelector(t),n=document.getElementById(t);return null!==e?e:n?n:null},getEls:function(t){if(!t)return null;if(!this.isFn(document.querySelectorAll))return document.getElementsByClassName(t);var e=document.querySelectorAll(t),n=document.getElementsByClassName(t);return e.length>0?e:n?n:[]},extend:function(t,e){return this.each(e,function(e,n){t[n]=e}),t},cb:function(t,e,n){n=n?n:[],this.isFn(t)?t.apply(e,n):null},run:function(t,e,n){this.cb(t,e,n)},unique:function(t){if(!this.isArr(t))return[];var e=[];return this.each(t,function(t,n){e.indexOf(t)===-1&&e.push(t)}),e},trimArr:function(t){var e=[];return this.each(t,function(t,n){""!==t&&e.push(t)}),e},copy:function(t){return this.isObj(t)||this.isArr(t)?JSON.parse(JSON.stringify(t)):null},ajax:function(t){var e=this,n=new XMLHttpRequest;t.type=t.type?t.type.toUpperCase():"GET",n.timeout=t.timeout&&t.async!==!1?t.timeout:0,"GET"===t.type?n.open(t.type,function(){return t.url.indexOf("?")?t.url+e.serialize(t.data):t.url+"?"+e.serialize(t.data)}(),t.async):"POST"===t.type&&n.open(t.type,t.url,t.async),n.setRequestHeader("Content-Type",t.contentType?t.contentType:"application/x-www-form-urlencoded; charset=UTF-8"),n.addEventListener("readystatechange",function(){try{var i=JSON.parse(n.responseText)}catch(r){var i=n.responseText}4==n.readyState&&(200==n.status?e.cb(t.success,e,[i]):n.status>=400&&e.cb(t.error,e,[i]))},!1),"GET"===t.type?n.send():"POST"===t.type&&n.send(this.serialize(t.data))},serialize:function(t){var e="";return this.isObj(t)&&this.isArr(t)?(this.each(t,function(t,n){e=e+n+"="+encodeURIComponent(t)+"&"}),e.substring(0,e.length-1)):""}},function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0,n=this.length;e<n;e++)if(this[e]===t)return e;return-1}),N&&!document.getElementsByClassName&&(Element.prototype.getElementsByClassName=function(t){for(var e=document.getElementsByTagName("*"),n=new Array,i=0;i<e.length;i++)for(var r=e[i],s=r.className.split(" "),a=0;a<s.length;a++)if(s[a]==t){n.push(r);break}return n})}(),e.prototype={constructor:e,init:function(t){this.tmpl=t.tmpl,this.data=t.data,this.dom=new Function("data",this.tmpl.dom).apply(this.tmpl,[this.data]),this.fragment=this.setDom()},setDom:function(){return this.tmpl.create(this.dom)},appendTo:function(t,e){var n=this.tmpl.fn;return 1===t.nodeType?t.appendChild(this.fragment):n.getEl(t).appendChild(this.fragment),n.cb(e,this.tmpl),this.tmpl},insertBefore:function(t,e,n){var i=this.tmpl.fn;return i.getEl(t).insertBefore(this.fragment,e),i.cb(n,this.tmpl),this.tmpl}},n.install=function(t){t.install(this)},n.alias={},n.prototype={constructor:n,init:function(){var t=this;this.fn.run(this.config.created,this),this.el=function(){return N?t.fn.getEl(t.config.el):t.config.el}(),l.call(this,"methods"),l.call(this,"data"),s.call(this),this.el&&(this.template=function(){return N?(t.config.template=t.el.innerHTML,t.el.innerHTML):(t.config.template=t.el,t.el)}(),o.call(this),u.call(this)),a.call(this),this.fn.run(this.config.mounted,this),this.fn.run(this.config.events,this)},data:function(t){var n=this;return new e({tmpl:n,data:t})},update:function(){this.template=this.config.template,u.call(this)},on:function(t,e,n,i){if(4===arguments.length)return this.eventType.indexOf(n)==-1&&r.apply(this,[t,n,i]),this.events[n]||(this.events[n]={}),this.events[n][e]||(this.events[n][e]=[]),this.events[n][e].push(i),this;if(3===arguments.length){var s=this;return i=n,n=e,this.fn.on(t,n,function(t){i.call(s,t)}),this}},off:function(t,e,n,i){if(4===arguments.length){var r=this.events[n][e].indexOf(i);r!=-1&&this.events[n][e].splice(r,1)}else 3===arguments.length&&this.fn.off(t,n,i);return this},fn:new t,bind:function(t,e){return i.apply(this,[t,e,"bind"]),this},unbind:function(t,e){return i.apply(this,[t,e,"unbind"]),this},replaceBind:function(t,e){return i.apply(this,[t,e,"replaceBind"]),this},addClass:function(t,e){return i.apply(this,[t,e,"addClass"]),this},removeClass:function(t,e){return i.apply(this,[t,e,"removeClass"]),this},replaceClass:function(t,e){return i.apply(this,[t,e,"replaceClass"]),this},hasClass:function(t,e){try{for(var n=t.className.split(" "),i=e.split(" "),r=0,s=0;s<i.length;s++)n.indexOf(i[s])!==-1&&++r;return r===i.length}catch(a){return!1}},attr:function(t,e){var n=this;if(this.fn.isObj(e))return this.fn.each(e,function(e,n){"boolean"==typeof e?(t[n]=e,t.setAttribute(n,e)):""===e?t.removeAttribute(n):t.setAttribute(n,e)}),this;if(e instanceof Array){var i=[];return this.fn.each(e,function(e,r){i.push(n.attr(t,e))}),i}return/^bind-\S*/.test(e)?new Function("return "+t.getAttribute(e)+";").apply(this):t.getAttribute(e)},prop:function(t,e){return this.fn.isObj(e)?(this.fn.each(e,function(e,n){t[n]=e}),this):this.fn.isStr(e)?/^bind-\S*/.test(e)?new Function("return "+t[e]+";").apply(this):t[e]:void 0},html:function(t,e){return void 0===e?t.innerHTML:(t.innerHTML=e,this)},val:function(t,e){return void 0===e?t.value:(t.value=e,this)},text:function(t,e){return void 0===e?t.textContent:(t.textContent=e,this)},parent:function(t,e){var n=t.parentNode;return n===document||null===n?null:e?this.hasClass(n,e)?n:this.parent(n,e):n},parents:function(t,e,n){var i=t.parentNode;return n=n?n:[],i===document||null===i?null:(this.hasClass(i,e)&&n.push(i),this.parents(i,e,n),n)},children:function(t){var e=[];return this.fn.each(t.childNodes,function(t){1===t.nodeType&&e.push(t)}),e},childrens:function(t,e,n){var i=0;for(n=n?n:[];i<t.children.length;i++)this.hasClass(t.children[i],e)&&n.push(t.children[i]),this.childrens(t.children[i],e,n);return n},next:function(t){var e=t.nextSibling;return null===e?null:1!==e.nodeType?this.next(e):e},nextAll:function(t){return this.siblings(t,"nextAll")},prevAll:function(t){return this.siblings(t,"prevAll")},prev:function(t){var e=t.previousSibling;return null===e?null:1!==e.nodeType?this.prev(e):e},siblings:function(t,e){var n=this.parent(t);if(null===n)return null;var i=n.children,r=[],s=0;for("nextAll"===e&&(s=Array.prototype.indexOf.call(i,t));s<i.length;s++)if(i[s]!==t&&r.push(i[s]),"prevAll"===e&&i[s]===t)return r;return r},show:function(t,e){return t.style.display="",this.animate(t,"show",e),this},hide:function(t,e){return t.style.display="none",this.animate(t,"hide",e),this},toggle:function(t){""===t.style.display?this.hide(t):this.show(t)},animate:function(t,e,n){var i=.1;if("show"===e?opacity=0:"hide"===e&&(opacity=1,i=-.1),this.fn.isNum(n)){t.style.opacity=0;var n=setInterval(function(){1==t.style.opacity?clearInterval(n):t.style.opacity=parseFloat(t.style.opacity)+i},n/60)}},remove:function(t){try{t.remove()}catch(e){var n=this.parent(t);null!==n?n.removeChild(t):console.warn("element remove error!")}return this},create:function(t){var e=t;if(N){e=document.createDocumentFragment();var n=document.createElement("div");for(n.innerHTML=t;0!==n.childNodes.length;){var i=n.childNodes[0],r=i.innerHTML;if("SCRIPT"===i.tagName){var s=document.createElement("script");s.innerHTML=r,this.fn.each(i.attributes,function(t){s.setAttribute(t.name,t.value)}),this.remove(i),i=s}e.appendChild(i)}}return e},append:function(t,e){return 1===t.nodeType?t.appendChild(e):this.fn.getEl(t).appendChild(e),this},cb:function(t){return this.fn.cb(t,this),this},preventDefault:function(t){var e=t||window.event;e.stopPropagation(),e.cancelBubble=!0}},n.version="v1.0.2",n});