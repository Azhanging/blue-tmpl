{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 834b5f9ea40fd830a2e7","webpack:///./src/tmpl/fn.js","webpack:///./src/tmpl/in_browser.js","webpack:///./src/tmpl/escapeCode.js","webpack:///./src/tmpl/compatibility.js","webpack:///./src/tmpl/tmpl.js","webpack:///./src/index.js","webpack:///./src/tmpl/config.js","webpack:///./src/tmpl/dom.js","webpack:///./src/tmpl/init.js","webpack:///./src/tmpl/render.js","webpack:///./src/tmpl/router.js","webpack:///./src/tmpl/tmpl-regexp.js","webpack:///./src/tmpl/tmpl-render.js"],"names":["Fn","array","Array","length","obj","Object","fn","string","num","isNaN","el","nodeType","cb","i","len","isArr","hasOwnProperty","exp","isFn","document","querySelector","getElementById","getEl","querySelectorAll","getElementsByClassName","getEls","options","each","option","key","context","args","apply","arr","newArray","item","index","indexOf","push","newArr","isObj","JSON","parse","stringify","xhr","XMLHttpRequest","type","toUpperCase","timeout","async","open","url","serialize","data","setRequestHeader","contentType","addEventListener","responseText","e","readyState","status","success","error","send","result","val","encodeURIComponent","substring","prototype","on","attachEvent","off","removeEventListener","detachEvent","inBrowser","window","escapeCode","className","children","getElementsByTagName","elements","child","classNames","split","j","Tmpl","opts","config","extend","copy","init","call","tmpl","template","setDom","escapeVal","replace","RegExp","constructor","install","alias","global","factory","_require","defineId","exports","module","version","open_tag","close_tag","methods","bindFn","_className","__className","findIndex","splice","join","setEntrust","ctx","event","ev","target","srcElement","eventType","events","_eventType","bind","hasClass","Dom","arguments","eventIndex","hasClassName","hasLen","attr","_attr","setAttribute","removeAttribute","attrs","test","Function","getAttribute","prop","_prop","isStr","html","undefined","innerHTML","value","text","textContent","parent","parentNode","hasClassParent","parents","els","childNodes","hasClassChild","childrens","nextEl","nextSibling","next","siblings","prevEl","previousSibling","prev","time","opacity","css","isNum","animate","style","display","opactiy","hide","show","timer","setInterval","animateStatus","speed","cssVal","Number","Math","ceil","documentElement","scrollTop","body","maxScrollTop","scrollHeight","innerHeight","parseInt","floor","setVal","setScrollTop","clearInterval","curCss","setStyle","isCameCase","camelCases","AZ","_AZ","match","str","toLowerCase","_css","getComputedStyle","camelCase","currentStyle","cssName","remove","removeChild","console","warn","dom","fragment","createDocumentFragment","tempEl","createElement","childHtml","tagName","newScript","attributes","name","appendChild","stopPropagation","cancelBubble","box","getBoundingClientRect","docElem","win","clientTop","clientLeft","pageYOffset","scrollLeft","pageXOffset","top","left","run","created","mounted","Render","create","insertBefore","ex","setRouter","checkRouterStatus","router","routerStatus","changeRoutereStatus","FILTER_TRANFORM","QUEST","INCLUDE_ID","INCLUDE_FILE","INCLUDE_NULL","INCLUDE_ERROR","BLOCK","BLOCK_APPEND","BLOCK_INSETR","EXTENDS","setEvent","setInstance","initRegExp","setRegExp","replaceInclude","replaceBlock","replaceAlias","clearBlock","setSeize","filterTransferredMeaning","fs","__non_webpack_require__","node","SCRIPT_REGEXP","NATIVE_SCRIPT","ECHO_SCRIPT_REGEXP","ECHO_ESCAPE_REGEXP","REPLACE_ECHO_SCRIPT_OPEN_TAG","ECHO_ESCAPE_REGEXP_OPEN_TAG","OPEN_TAG_REGEXP","CLOSE_TAG_REGEXP","get","_get","expr","tm","tmItem","script","replaceScript","echoString","domString","longString","_echoString","_string","lastIndex","_longString","include","includeTmpl","includeId","unique","toString","trimArr","id","replaceIncludeRegExp","readFileSync","encoding","baseFile","baseFileName","blockTmpl","baseTmpl","baseBlockName","hasBlock","blocktmpl","_index","_name","$2","blockContent","$3"],"mappings":"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","file":"js/tmpl.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Tmpl\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Tmpl\"] = factory();\n\telse\n\t\troot[\"Tmpl\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 834b5f9ea40fd830a2e7","//运行环境是否在浏览器\r\nimport inBrowser from './in_browser';\r\n/*常用的方法*/\r\nexport default class Fn {\r\n\tisArr(array) {\r\n\t\treturn array instanceof Array || !!(array && array.length);\r\n\t}\r\n\t\r\n\tisObj(obj) {\r\n\t\treturn obj instanceof Object && !(obj instanceof Array) && obj !== null;\r\n\t}\r\n\t\r\n\tisFn(fn) {\r\n\t\treturn typeof fn === 'function';\r\n\t}\r\n\tisStr(string) {\r\n\t\treturn typeof string === 'string';\r\n\t}\r\n\r\n\tisNum(num) {\r\n\t\treturn typeof num === 'number' || !isNaN(num);\r\n\t}\r\n\r\n\tisEl(el) {\r\n\t\treturn !!(el && el.nodeType);\r\n\t}\r\n\r\n\teach(obj, cb) { //遍历\r\n\t\tlet i = 0,\r\n\t\t\tlen = obj.length;\r\n\t\tif(this.isArr(obj)) {\r\n\t\t\tfor(; i < len; i++) {\r\n\t\t\t\tcb(obj[i], i);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor(i in obj) {\r\n\t\t\t\tif(obj.hasOwnProperty(i)) cb(obj[i], i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgetEl(exp) { //获取节点\r\n\t\tif(!exp) return null;\r\n\t\tif(!this.isFn(document.querySelector))\r\n\t\t\treturn document.getElementById(exp);\r\n\t\tconst getEl = document.querySelector(exp),\r\n\t\t\tel = document.getElementById(exp);\r\n\t\treturn getEl !== null ? getEl : (el ? el : null);\r\n\t}\r\n\r\n\tgetEls(exp) { //获取多个节点\r\n\t\tif(!exp) return null;\r\n\t\tif(!this.isFn(document.querySelectorAll))\r\n\t\t\treturn document.getElementsByClassName(exp);\r\n\t\tconst getEls = document.querySelectorAll(exp),\r\n\t\t\tel = document.getElementsByClassName(exp);\r\n\t\treturn getEls.length > 0 ? getEls : (el ? el : []);\r\n\t}\r\n\r\n\textend(obj, options) { //合并\r\n\t\tthis.each(options, (option, key) => {\r\n\t\t\tobj[key] = option;\r\n\t\t});\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tcb(cb, context, args) { //回调\r\n\t\targs = args ? args : [];\r\n\t\tthis.isFn(cb) ? (cb.apply(context, args)) : null;\r\n\t}\r\n\r\n\trun(cb, context, args) { //执行函数\r\n\t\tthis.cb(cb, context, args);\r\n\t}\r\n\r\n\tunique(arr) { /*去重*/\r\n\t\tif(!this.isArr(arr)) return [];\r\n\t\tlet newArray = [];\r\n\t\tthis.each(arr, (item, index) => {\r\n\t\t\tif(newArray.indexOf(item) === -1) {\r\n\t\t\t\tnewArray.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn newArray;\r\n\t}\r\n\r\n\ttrimArr(arr) { /*清空数组中空的值*/\r\n\t\tlet newArr = [];\r\n\t\tthis.each(arr, (item, index) => {\r\n\t\t\tif(item !== '') {\r\n\t\t\t\tnewArr.push(item);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn newArr;\r\n\t}\r\n\r\n\tcopy(obj) { /*深拷贝*/\r\n\t\tif(this.isObj(obj) || this.isArr(obj))\r\n\t\t\treturn JSON.parse(JSON.stringify(obj));\r\n\t\treturn null;\r\n\t}\r\n\r\n\tajax(options) {\r\n\t\t//创建xhr\r\n\t\tconst xhr = new XMLHttpRequest();\r\n\t\t//连接类型\r\n\t\toptions.type = (options.type ? options.type.toUpperCase() : 'GET');\r\n\t\t//超时\r\n\t\txhr.timeout = options.timeout && options.async !== false ? options.timeout : 0;\r\n\r\n\t\tif(options.type === \"GET\") {\r\n\t\t    \r\n\t\t\txhr.open(options.type, (() => {\r\n\t\t\t    \r\n\t\t\t\treturn options.url.indexOf('?') ?\r\n\t\t\t\t\toptions.url + this.serialize(options.data) :\r\n\t\t\t\t\toptions.url + '?' + this.serialize(options.data);\r\n\t\t\t\t\t\r\n\t\t\t})(), options.async);\r\n\t\t\t\r\n\t\t} else if(options.type === \"POST\") {\r\n\t\t    \r\n\t\t\txhr.open(options.type, options.url, options.async);\r\n\t\t\t\r\n\t\t}\r\n\t\txhr.setRequestHeader('Content-Type', options.contentType ?\r\n\t\t\toptions.contentType :\r\n\t\t\t'application/x-www-form-urlencoded; charset=UTF-8');\r\n\t\t//响应事件\r\n\t\txhr.addEventListener('readystatechange', () => {\r\n\t\t    let data;\r\n\t\t    \r\n\t\t\ttry {\r\n\t\t\t\tdata = JSON.parse(xhr.responseText);\r\n\t\t\t} catch(e) {\r\n\t\t\t\tdata = xhr.responseText;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(xhr.readyState == 4) {\r\n\t\t\t\tif(xhr.status == 200) {\r\n\t\t\t\t\tthis.cb(options.success, this, [data]);\r\n\t\t\t\t} else if(xhr.status >= 400) {\r\n\t\t\t\t\tthis.cb(options.error, this, [data]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, false);\r\n\r\n\t\t//send指令\r\n\t\tif(options.type === \"GET\") {\r\n\t\t    \r\n\t\t\txhr.send();\r\n\t\t\t\r\n\t\t} else if(options.type === \"POST\") {\r\n\t\t    \r\n\t\t\txhr.send(this.serialize(options.data));\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\r\n\tserialize(data) { //初始化form数据\r\n\t\tlet result = '';\r\n\t\t\r\n\t\tif(!this.isObj(data) || !this.isArr(data)) return '';\r\n\t\t\r\n\t\tthis.each(data, (val, key) => {\r\n\t\t    \r\n\t\t\tresult = result + key + '=' + encodeURIComponent(val) + '&';\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\treturn result.substring(0, result.length - 1);\r\n\t}\r\n}\r\n\r\n//设置事件\r\nFn.prototype.on = (function() {\r\n    if(!inBrowser) return;\r\n    if(typeof document.addEventListener === 'function') {\r\n        return function on(el, type, cb) {\r\n            el.addEventListener(type, cb, false);\r\n        }\r\n    } else {\r\n        return function on(el, type, cb) {\r\n            el.attachEvent('on' + type, cb);\r\n        };\r\n    }\r\n})();\r\n\r\n//移除事件\r\nFn.prototype.off = (function() {\r\n    if(!inBrowser) return;\r\n    if(typeof document.removeEventListener === 'function') {\r\n        return function off(el, type, cb) {\r\n            el.addEventListener(type, cb, false);\r\n        }\r\n    } else {\r\n        return function off(el, type, cb) {\r\n            el.detachEvent('on' + type, cb);\r\n        };\r\n    }\r\n})();\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/fn.js","/*\r\n *  检测是否在浏览器的环境中 \r\n * */\r\n\r\nconst inBrowser = typeof window !== 'undefined';\r\n\r\nexport default inBrowser;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/in_browser.js","// html转义\r\nconst escapeCode = {\r\n    \"&\": \"&amp;\",\r\n    \"<\": \"&lt;\",\r\n    \">\": \"&gt;\",\r\n    '\"': \"&quot;\",\r\n    \"'\": \"&#x27;\",\r\n    \"`\": \"&#x60;\"\r\n}\r\n\r\nexport default escapeCode;\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/escapeCode.js","//运行环境是否在浏览器\r\nimport inBrowser from './in_browser';\r\n\r\n//兼容性IE8\r\n(() => {\r\n\t//兼容IE8中 的indexOf\r\n\tif(!Array.prototype.indexOf) {\r\n\t\tArray.prototype.indexOf = (val) => {\r\n\t\t\tfor(let index = 0, len = this.length; index < len; index++) {\r\n\t\t\t\tif(this[index] === val) {\r\n\t\t\t\t\treturn index;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\r\n\t/*只在浏览器环境使用*/\r\n\tif(inBrowser && !document.getElementsByClassName) {\r\n\t\tdocument.getElementsByClassName = (className, el) => {\r\n\t\t\tconst children = (el || document).getElementsByTagName('*'),\r\n\t\t\t\telements = new Array();\r\n\t\t\tfor(let i = 0; i < children.length; i++) {\r\n\t\t\t    \r\n\t\t\t\tconst child = children[i],\r\n\t\t\t\t\tclassNames = child.className.split(' ');\r\n\t\t\t\t\t\r\n\t\t\t\tfor(let j = 0; j < classNames.length; j++) {\r\n\t\t\t\t\tif(classNames[j] == className) {\r\n\t\t\t\t\t\telements.push(child);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn elements;\r\n\t\t};\r\n\t}\r\n})();\r\n\r\nexport default true;\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/compatibility.js","//tmpl的初始化\r\nimport init from './init';\r\n//处理模板数据的Render类\r\nimport Render from './render';\r\n//常用的类方法\r\nimport Fn from './fn';\r\n//Dom的操作\r\nimport Dom from './dom';\r\n//config配置\r\nimport config from './config';\r\n//转义html\r\nimport escapeCode from './escapeCode';\r\n//实例化常用的方法\r\nconst fn = new Fn();\r\n\r\nexport default class Tmpl extends Dom{\r\n    //Tmpl构造\r\n\tconstructor(opts) {\r\n\t    super();\r\n\t\tthis.config = fn.extend(fn.copy(config), opts);\r\n\t\tthis.init();\r\n\t}\r\n\t\r\n\t//安装插件\r\n\tstatic install(constructor) {\r\n        constructor.install(this);\r\n    }\r\n\t\r\n\t//初始化对象\r\n\tinit(){\r\n\t    init.call(this);\r\n\t}\r\n\t\r\n\t//解析模板和数据\r\n\trender(data) {\r\n        var tmpl = this;\r\n        return new Render({\r\n            tmpl: tmpl,\r\n            data: data\r\n        });\r\n    }\r\n\t\r\n\t//添加数据更新模板\r\n\tupdate() {\r\n        this.template = this.config.template;\r\n        setDom.call(this);\r\n    }\r\n\t\r\n    /*回调*/\r\n    cb(cb) {\r\n        fn.cb(cb, this);\r\n        return this;\r\n    }\r\n    \r\n    /*转义*/\r\n    escape(escapeVal) { \r\n        fn.each(escapeCode, (item, key) => {\r\n            escapeVal = escapeVal.replace(new RegExp(key, 'g'), item);\r\n        });\r\n        return escapeVal;\r\n    }\r\n}\r\n\r\n//常用的方法给tmpl的fn属性中\r\nTmpl.prototype.fn = fn;\r\n\r\n\r\n//设置路径别名常量\r\nTmpl.alias = {};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/tmpl.js","//Tmpl 文件入口\r\nimport Tmpl from './tmpl/tmpl';\r\n//兼容性处理\r\nimport compatibility from './tmpl/compatibility';\r\n\r\n(function(global, factory) {\r\n\tif(typeof _require === 'function') {\r\n\t\t_require.defineId('tmpl', factory);\r\n\t} else if(typeof exports === 'object' && typeof module !== 'undefined') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\t(global ? (global.Tmpl = factory()) : {});\r\n\t}\r\n})(typeof window !== 'undefined' ? window : this, function() {\r\n\r\n\tTmpl.version = \"v1.0.4\";\r\n\r\n\treturn Tmpl;\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/*配置信息*/\r\nconst config = {\r\n    open_tag: \"<%\", //OPEN_TAG\r\n    close_tag: \"%>\", //CLOSE_TAG,\r\n    template: \"\",\r\n    data: {},\r\n    methods: {}\r\n};\r\n\r\nexport default config;\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/config.js","//运行环境是否在浏览器\r\nimport inBrowser from './in_browser';\r\n//常用的方法\r\nimport Fn from './fn';\r\n//实例化常用的方法\r\nconst fn = new Fn();\r\n\r\n//绑定相关函数\r\nfunction bindFn(el, className, type) {\r\n\r\n\tconst _className = el.className.split(' ');\r\n\r\n\t//替换\r\n\tif(fn.isObj(className) && (type == 'replaceBind' || type == 'replaceClass')) {\r\n\t\tfn.each(className, (__className, key) => {\r\n\t\t\tvar findIndex = _className.indexOf(key);\r\n\t\t\tif(findIndex != -1) _className[findIndex] = __className;\r\n\t\t});\r\n\t} else {\r\n\t\t//获得el中的className{type:string}\r\n\t\tclassName = className.split(' ');\r\n\r\n\t\tfor(var index = 0; index < className.length; index++) {\r\n\r\n\t\t\tconst findIndex = _className.indexOf(className[index]);\r\n\r\n\t\t\tif(type == 'bind' || type == 'addClass') {\r\n\r\n\t\t\t\tif(findIndex == -1) _className.push(className[index]);\r\n\r\n\t\t\t} else if(type == 'unbind' || type == 'removeClass') {\r\n\r\n\t\t\t\tif(findIndex != -1) _className.splice(findIndex, 1);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tel.className = _className.join(' ');\r\n\r\n\treturn this;\r\n}\r\n\r\n//设置主的委托事件\r\nfunction setEntrust(ctx, type, cb) {\r\n\tfn.on(ctx, type, (event) => {\r\n\t\tconst ev = event || window.event,\r\n\r\n\t\t\tel = ev.target || ev.srcElement,\r\n\r\n\t\t\teventType = this.events[type];\r\n\r\n\t\tfn.each(eventType, (_eventType, bind) => {\r\n\r\n\t\t\tif(!this.hasClass(el, bind)) return;\r\n\r\n\t\t\tfn.each(_eventType, (cb, index) => {\r\n\r\n\t\t\t\tcb.apply(this, [ev, el]);\r\n\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t});\r\n\r\n\t//添加委托事件\r\n\tthis.eventType.push(type);\r\n}\r\n\r\nclass Dom {\r\n\t//绑定事件\r\n\ton(ctx, exp, type, cb) {\r\n\t\tif(arguments.length === 4) {\r\n\t\t\tif(this.eventType.indexOf(type) == -1)\r\n\t\t\t\tsetEntrust.apply(this, [ctx, type, cb]);\r\n\t\t\t//查找现在的节点是否存在事件\r\n\t\t\tif(!this.events[type])\r\n\t\t\t\tthis.events[type] = {};\r\n\t\t\t//当前的事件是否有设置\r\n\t\t\tif(!this.events[type][exp])\r\n\t\t\t\tthis.events[type][exp] = [];\r\n\t\t\t//添加处理函数到事件列表中\r\n\t\t\tthis.events[type][exp].push(cb);\r\n\t\t} else if(arguments.length === 3) {\r\n\t\t\tcb = type;\r\n\t\t\ttype = exp;\r\n\t\t\tfn.on(ctx, type, (event) => {\r\n\t\t\t\tcb.call(this, event);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//取消绑定事件\r\n\toff(ctx, exp, type, cb) {\r\n\t\tif(arguments.length === 4) {\r\n\t\t\tvar eventIndex = this.events[type][exp].indexOf(cb);\r\n\t\t\tif(eventIndex != -1)\r\n\t\t\t\tthis.events[type][exp].splice(eventIndex, 1);\r\n\t\t} else if(arguments.length === 3) {\r\n\t\t\t/*删除事件*/\r\n\t\t\tfn.off(ctx, type, cb);\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//设置事件委托的class\r\n\tbind(el, bind) {\r\n\t\tbindFn.apply(this, [el, bind, 'bind']);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//取消方法绑定\r\n\tunbind(el, bind) {\r\n\t\tbindFn.apply(this, [el, bind, 'unbind']);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//替换绑定\r\n\treplaceBind(el, bind) {\r\n\t\tbindFn.apply(this, [el, bind, 'replaceBind']);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//添加class\r\n\taddClass(el, className) {\r\n\t\tbindFn.apply(this, [el, className, 'addClass']);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//删除class\r\n\tremoveClass(el, className) {\r\n\t\tbindFn.apply(this, [el, className, 'removeClass']);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//替换className\r\n\treplaceClass(el, className) {\r\n\t\tbindFn.apply(this, [el, className, 'replaceClass']);\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//是否存在class\r\n\thasClass(el, className) {\r\n\t\ttry {\r\n\t\t\t//节点中存在的className\r\n\t\t\tconst _className = el.className.split(' '),\r\n\t\t\t\t//是否存在的className\r\n\t\t\t\thasClassName = className.split(' ');\r\n\r\n\t\t\tlet hasLen = 0;\r\n\r\n\t\t\tfor(var index = 0; index < hasClassName.length; index++) {\r\n\t\t\t\tif(_className.indexOf(hasClassName[index]) !== -1) ++hasLen;\r\n\t\t\t}\r\n\r\n\t\t\tif(hasLen === hasClassName.length) return true;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t} catch(e) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t//获取属性\r\n\tattr(el, attr) {\r\n\t\tif(fn.isObj(attr)) {\r\n\r\n\t\t\tfn.each(attr, (_attr, key) => {\r\n\r\n\t\t\t\tif(typeof _attr === 'boolean') {\r\n\r\n\t\t\t\t\tel[key] = _attr;\r\n\r\n\t\t\t\t\tel.setAttribute(key, _attr);\r\n\r\n\t\t\t\t} else if(_attr === '') {\r\n\r\n\t\t\t\t\tel.removeAttribute(key);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tel.setAttribute(key, _attr);\r\n\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif(attr instanceof Array) {\r\n\r\n\t\t\t\tvar attrs = [];\r\n\r\n\t\t\t\tfn.each(attr, (_attr, index) => {\r\n\r\n\t\t\t\t\tattrs.push(this.attr(el, _attr));\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn attrs;\r\n\r\n\t\t\t} else if(/^bind-\\S*/.test(attr)) {\r\n\r\n\t\t\t\treturn new Function('return ' + el.getAttribute(attr) + ';').apply(this);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn el.getAttribute(attr);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t//获取、设置prop属性\r\n\tprop(el, prop) {\r\n\t\t//设置节点属性\r\n\t\tif(fn.isObj(prop)) {\r\n\t\t\tfn.each(prop, (_prop, key) => {\r\n\r\n\t\t\t\tel[key] = _prop;\r\n\r\n\t\t\t});\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t} else if(fn.isStr(prop)) { //获得节点属性\r\n\r\n\t\t\tif(/^bind-\\S*/.test(prop))\r\n\r\n\t\t\t\treturn new Function('return ' + el[prop] + ';').apply(this);\r\n\r\n\t\t\treturn el[prop];\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t//获取、设置html\r\n\thtml(el, html) {\r\n\t\tif(html === undefined) return el.innerHTML;\r\n\t\tel.innerHTML = html;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//获取、设置value\r\n\tval(el, val) {\r\n\t\tif(val === undefined) return el.value;\r\n\t\tel.value = val;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//获取、设置textContent\r\n\ttext(el, text) {\r\n\t\tif(text === undefined) return el.textContent;\r\n\t\tel.textContent = text;\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//查找符合的一个父级节点\r\n\tparent(el, hasClassName) {\r\n\r\n\t\tvar parent = el.parentNode;\r\n\r\n\t\tif(parent === document || parent === null) return null;\r\n\r\n\t\tif(!hasClassName) return parent;\r\n\r\n\t\tif(this.hasClass(parent, hasClassName)) return parent;\r\n\r\n\t\treturn this.parent(parent, hasClassName);\r\n\r\n\t}\r\n\r\n\t//超找所有符合的父元素\r\n\tparents(el, hasClassName, hasClassParent) {\r\n\r\n\t\tvar parent = el.parentNode;\r\n\r\n\t\thasClassParent = (hasClassParent ? hasClassParent : []);\r\n\r\n\t\tif(parent === document || parent === null) return null;\r\n\r\n\t\tif(this.hasClass(parent, hasClassName)) hasClassParent.push(parent);\r\n\r\n\t\tthis.parents(parent, hasClassName, hasClassParent);\r\n\r\n\t\treturn hasClassParent;\r\n\t}\r\n\r\n\t//获取直接的当个子节点\r\n\tchildren(el) {\r\n\t\tconst els = [];\r\n\t\tfn.each(el.childNodes, (child) => {\r\n\t\t\tif(child.nodeType === 1) {\r\n\t\t\t\tels.push(child);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn els;\r\n\t};\r\n\r\n\t//查找对应的class存在的节点\r\n\tchildrens(el, className, hasClassChild) {\r\n\t\tvar i = 0;\r\n\t\thasClassChild = (hasClassChild ? hasClassChild : []);\r\n\t\tfor(; i < el.children.length; i++) {\r\n\t\t\tif(this.hasClass(el.children[i], className)) hasClassChild.push(el.children[i]);\r\n\t\t\tthis.childrens(el.children[i], className, hasClassChild);\r\n\t\t}\r\n\t\treturn hasClassChild;\r\n\t}\r\n\r\n\t//下一个节点\r\n\tnext(el) {\r\n\t\tconst nextEl = el.nextSibling;\r\n\t\tif(nextEl === null) return null;\r\n\t\tif(nextEl.nodeType !== 1) return this.next(nextEl);\r\n\t\treturn nextEl;\r\n\t}\r\n\r\n\t//获取当前元素同级前的节点\r\n\tnextAll(el) {\r\n\t\treturn this.siblings(el, 'nextAll');\r\n\t}\r\n\r\n\t//获取当前元素同级后的节点\r\n\tprevAll(el) {\r\n\t\treturn this.siblings(el, 'prevAll');\r\n\t}\r\n\r\n\t//上一个节点\r\n\tprev(el) {\r\n\t\tconst prevEl = el.previousSibling;\r\n\t\tif(prevEl === null) return null;\r\n\t\tif(prevEl.nodeType !== 1) return this.prev(prevEl);\r\n\t\treturn prevEl;\r\n\t}\r\n\r\n\t//获取同级的兄弟节点\r\n\tsiblings(el, type) {\r\n\t\tconst parent = this.parent(el);\r\n\r\n\t\tif(parent === null) return null;\r\n\r\n\t\tconst child = parent.children;\r\n\r\n\t\tconst siblings = [];\r\n\r\n\t\tlet i = 0;\r\n\r\n\t\tif(type === 'nextAll')\r\n\t\t\ti = Array.prototype.indexOf.call(child, el);\r\n\r\n\t\tfor(; i < child.length; i++) {\r\n\r\n\t\t\tif(child[i] !== el) siblings.push(child[i]);\r\n\r\n\t\t\tif(type === 'prevAll' && child[i] === el) return siblings;\r\n\r\n\t\t}\r\n\r\n\t\treturn siblings;\r\n\t}\r\n\r\n\t//显示\r\n\thide(el, time) {\r\n\r\n\t\tvar opacity = this.css(el, 'opacity');\r\n\r\n\t\tel.opacity = opacity ? opacity : 1;\r\n\r\n\t\tfn.isNum(time) ? (this.animate(el, {\r\n\t\t\topacity: 0\r\n\t\t}, time, () => {\r\n\t\t\tel.style.display = 'none';\r\n\t\t})) : el.style.display = 'none';\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//隐藏\r\n\tshow(el, time) {\r\n\r\n\t\tvar opactiy = el.opactiy ? el.opactiy : 100;\r\n\r\n\t\tif(fn.isNum(time)) {\r\n\r\n\t\t\tthis.css(el, {\r\n\t\t\t\topacity: 0\r\n\t\t\t});\r\n\r\n\t\t\tel.style.display = '';\r\n\r\n\t\t\tthis.animate(el, {\r\n\t\t\t\topacity: opactiy\r\n\t\t\t}, time);\r\n\r\n\t\t} else {\r\n\t\t\tel.style.display = '';\r\n\t\t}\r\n\t\treturn this;\r\n\t}\r\n\r\n\t/*切换显示状态*/\r\n\ttoggle(el, time) {\r\n\t\tif(el.style.display === '') this.hide(el, time);\r\n\t\telse this.show(el, time);\r\n\t}\r\n\r\n\t/*动画*/\r\n\tanimate(el, animate, time, cb) {\r\n\r\n\t\tif(!el) return;\r\n\r\n\t\tel.timer = setInterval(() => {\r\n\r\n\t\t\tlet animateStatus = true;\r\n\r\n\t\t\tfn.each(animate, (val, type) => {\r\n\r\n\t\t\t\tlet speed = 0,\r\n\t\t\t\t\tcssVal = 0;\r\n\r\n\t\t\t\tif(type === 'opacity') {\r\n\r\n\t\t\t\t\tcssVal = Number(this.css(el, 'opacity')) * 100;\r\n\r\n\t\t\t\t} else if(type === 'scrollTop') {\r\n\r\n\t\t\t\t\tcssVal = Math.ceil(document.documentElement.scrollTop || document.body.scrollTop);\r\n\r\n\t\t\t\t\tlet maxScrollTop = Math.ceil(document.body.scrollHeight - window.innerHeight);\r\n\r\n\t\t\t\t\tif(val > maxScrollTop) {\r\n\t\t\t\t\t\tval = maxScrollTop;\r\n\t\t\t\t\t\tanimate['scrollTop'] = maxScrollTop;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcssVal = parseInt(this.css(el, type));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tspeed = (val - cssVal) / 8;\r\n\r\n\t\t\t\tspeed = speed > 0 ? Math.ceil(speed) : Math.floor(speed);\r\n\r\n\t\t\t\tconst setVal = {};\r\n\r\n\t\t\t\tif(type === 'opacity') {\r\n\t\t\t\t\tsetVal['opacity'] = (cssVal + speed) / 100;\r\n\t\t\t\t\tthis.css(el, setVal);\r\n\t\t\t\t} else if(type === 'scrollTop') {\r\n\t\t\t\t\tthis.setScrollTop(cssVal + speed);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetVal[type] = cssVal + speed + 'px';\r\n\t\t\t\t\tthis.css(el, setVal);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(parseInt(val) !== cssVal) {\r\n\t\t\t\t\tanimateStatus = false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif(animateStatus) {\r\n\t\t\t\tclearInterval(el.timer);\r\n\t\t\t\tfn.cb(cb, this);\r\n\t\t\t}\r\n\r\n\t\t}, time / 60);\r\n\t}\r\n\r\n\t/*操作css*/\r\n\tcss(el, css) {\r\n\t\t//获取css\r\n\t\tif(fn.isStr(css)) {\r\n\t\t\treturn this.curCss(el, css);\r\n\t\t} else if(fn.isObj(css)) {\r\n\t\t\t//设置style\r\n\t\t\tthis.setStyle(el, css);\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n\r\n\t/*处理驼峰和非驼峰*/\r\n\tcamelCase(text, isCameCase) {\r\n\t\tlet camelCases;\r\n\r\n\t\tconst AZ = /[A-Z]/g,\r\n\t\t\t_AZ = /-[a-z]/g;\r\n\r\n\t\tif(!fn.isStr(text)) return text;\r\n\r\n\t\tcamelCases = isCameCase ? text.match(_AZ) : text.match(AZ);\r\n\r\n\t\tcamelCases = camelCases ? camelCases : [];\r\n\r\n\t\tfn.each(camelCases, (str, index) => {\r\n\t\t\tif(isCameCase) text = text.replace(str, str.replace(/-/g, '').toUpperCase());\r\n\t\t\telse text = text.replace(str, '-' + str.toLowerCase());\r\n\t\t});\r\n\r\n\t\treturn text;\r\n\t}\r\n\r\n\t/*获取计算好的值*/\r\n\tcurCss(el, css) {\r\n\r\n\t\tlet _css;\r\n\r\n\t\tif(window.getComputedStyle) {\r\n\r\n\t\t\t_css = this.camelCase(css, true);\r\n\r\n\t\t\treturn window.getComputedStyle(el, null)[_css];\r\n\r\n\t\t} else if(document.documentElement.currentStyle) {\r\n\r\n\t\t\t_css = this.camelCase(css, false);\r\n\r\n\t\t\treturn document.documentElement.currentStyle[_css];\r\n\r\n\t\t}\r\n\t}\r\n\r\n\t/*设置css*/\r\n\tsetStyle(el, css) {\r\n\r\n\t\tfn.each(css, (style, cssName) => {\r\n\r\n\t\t\tel.style[cssName] = style;\r\n\r\n\t\t});\r\n\t}\r\n\r\n\t/*删除节点*/\r\n\tremove(el) {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tel.remove();\r\n\r\n\t\t} catch(e) {\r\n\r\n\t\t\tconst parent = this.parent(el);\r\n\r\n\t\t\tparent !== null ? parent.removeChild(el) : (console.warn('element remove error!'));\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/*创建元素*/\r\n\tcreate(dom) {\r\n\r\n\t\tconst fragment = document.createDocumentFragment();\r\n\r\n\t\tconst tempEl = document.createElement('div');\r\n\r\n\t\ttempEl.innerHTML = dom;\r\n\r\n\t\twhile(tempEl.childNodes.length !== 0) {\r\n\r\n\t\t\tlet child = tempEl.childNodes[0];\r\n\r\n\t\t\tconst childHtml = child.innerHTML;\r\n\r\n\t\t\tif(child.tagName === 'SCRIPT') {\r\n\r\n\t\t\t\tconst newScript = document.createElement('script');\r\n\r\n\t\t\t\tnewScript.innerHTML = childHtml;\r\n\r\n\t\t\t\tfn.each(child.attributes, (attr) => {\r\n\r\n\t\t\t\t\tif(!attr) true;\r\n\r\n\t\t\t\t\tnewScript.setAttribute(attr.name, attr.value);\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.remove(child);\r\n\r\n\t\t\t\tchild = newScript;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfragment.appendChild(child);\r\n\r\n\t\t}\r\n\r\n\t\treturn fragment;\r\n\t}\r\n\r\n\t/*插入节点*/\r\n\tappend(el, child) {\r\n\r\n\t\tif(el.nodeType === 1) el.appendChild(child);\r\n\r\n\t\telse fn.getEl(el).appendChild(child);\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t//取消冒泡\r\n\tpreventDefault(event) {\r\n\r\n\t\tconst ev = event || window.event;\r\n\r\n\t\tev.stopPropagation();\r\n\r\n\t\tev.cancelBubble = true;\r\n\r\n\t}\r\n\r\n\t//offset\r\n\toffset(el) {\r\n\r\n\t\tconst box = el.getBoundingClientRect(),\r\n\t\t\r\n\t\t\tdocElem = document.documentElement,\r\n\t\t\t\r\n\t\t\tbody = document.body,\r\n\t\t\t\r\n\t\t\twin = window,\r\n\t\t\t\r\n\t\t\tclientTop = docElem.clientTop || body.clientTop || 0,\r\n\r\n\t\t\tclientLeft = docElem.clientLeft || body.clientLeft || 0,\r\n\r\n\t\t\tscrollTop = win.pageYOffset || docElem.scrollTop,\r\n\r\n\t\t\tscrollLeft = win.pageXOffset || docElem.scrollLeft;\r\n\r\n\t\treturn {\r\n\t\t\ttop: box.top + scrollTop - clientTop,\r\n\t\t\tleft: box.left + scrollLeft - clientLeft\r\n\t\t};\r\n\t}\r\n\r\n\t/*设置滚动条高度*/\r\n\tsetScrollTop(top, animate) {\r\n\r\n\t\tdocument.body.scrollTop = top;\r\n\r\n\t\tdocument.documentElement.scrollTop = top;\r\n\r\n\t}\r\n}\r\n\r\nexport default Dom;\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/dom.js","//常用的方法\r\nimport Fn from './fn';\r\n//解析方法\r\nimport tmplRender from './tmpl-render';\r\n//运行环境是否在浏览器\r\nimport inBrowser from './in_browser';\r\n//tmpl的render解析\r\nimport { \r\n    setInstance,\r\n    setRegExp, \r\n    setDom, \r\n    setEvent \r\n} from './tmpl-render';\r\n\r\n//router相关\r\nimport {\r\n\tsetRouter,\r\n\tcheckRouterStatus\r\n} from './router';\r\n\r\n//实例化常用的方法\r\nconst fn = new Fn();\r\n\r\nexport default function init() {\r\n\t//构建开始的钩子\r\n\tfn.run(this.config.created, this);\r\n\t//初始配置信息\r\n\tthis.el = (() => {\r\n\t\tif(inBrowser) {\r\n\t\t\treturn fn.getEl(this.config.el)\r\n\t\t} else {\r\n\t\t\treturn this.config.el;\r\n\t\t}\r\n\t})();\r\n\t//初始化方法\r\n\tsetInstance.call(this, 'methods');\r\n\t//初始化数据\r\n\tsetInstance.call(this, 'data');\r\n\t//初始化路由\r\n\tsetRouter.call(this);\r\n\t//查找模板\r\n\tif(this.el) {\r\n\t\tthis.template = (() => {\r\n\t\t\tif(inBrowser) {\r\n\t\t\t\tthis.config.template = this.el.innerHTML;\r\n\t\t\t\treturn this.el.innerHTML;\r\n\t\t\t} else {\r\n\t\t\t\tthis.config.template = this.el;\r\n\t\t\t\treturn this.el;\r\n\t\t\t}\r\n\t\t})();\r\n\t\t\r\n\t\tsetRegExp.call(this);\r\n\t\t//转化为js执行\r\n\t\tsetDom.call(this);\r\n\t}\r\n\t//初始化事件\r\n\tsetEvent.call(this);\r\n\t//设置事件\r\n\tfn.run(this.config.events, this);\r\n\t//所有完毕后的钩子\r\n\tfn.run(this.config.mounted, this);\r\n\t//检查是否存在路由的状态\r\n\tcheckRouterStatus.call(this);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/init.js","/*\r\n *  Render代理实例,针对tmpl中的数据流\r\n * */\r\n\r\n//运行环境是否在浏览器\r\nimport inBrowser from './in_browser';\r\n//常用的方法\r\nimport Fn from './fn';\r\n//实例化常用的方法\r\nconst fn = new Fn();\r\n\r\n\r\nclass Render {\r\n\tconstructor(opts) {\r\n\t    \r\n\t\tthis.init(opts);\r\n\t\t\r\n\t}\r\n\t//初始render类\r\n\tinit(opts) {\r\n\t    \r\n\t\tthis.tmpl = opts.tmpl;\r\n\t\t\r\n\t\tthis.data = opts.data;\r\n\t\t\r\n\t\tthis.dom = new Function('data', this.tmpl.dom).apply(this.tmpl, [this.data]);\r\n\t\t\r\n\t\tinBrowser ? (this.fragment = this.tmpl.create(this.dom)): null;\r\n\t\t\r\n\t}\r\n\t//在父节点中插入解析后的模板\r\n\tappendTo(el, cb) {\r\n\t    \r\n\t\tconst fn = this.tmpl.fn;\r\n\t\t\r\n\t\tif(el.nodeType === 1) el.appendChild(this.fragment);\r\n\t\t\r\n\t\telse fn.getEl(el).appendChild(this.fragment);\r\n\t\t\r\n\t\tfn.cb(cb, this.tmpl);\r\n\t\t\r\n\t\treturn this.tmpl;\r\n\t}\r\n    //在el子节点ex中插入解析后的模板\t\r\n\tinsertBefore(){\r\n\t    \r\n\t    const fn = this.tmpl.fn;\r\n\t    \r\n        fn.getEl(el).insertBefore(this.fragment, ex);\r\n        \r\n        fn.cb(cb, this.tmpl);\r\n        \r\n        return this.tmpl;\r\n\t}\r\n\t\r\n}\r\n\r\nexport default Render;\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/render.js","/*路由相关*/\r\n\r\n//常用的方法\r\nimport Fn from './fn';\r\n//实例化常用的方法\r\nconst fn = new Fn();\r\n\r\n//把路由实例挂靠到模板中\r\nexport function setRouter() {\r\n\tif(fn.isObj(this.config.router)) {\r\n\t\tthis.constructor.router = this.config.router;\r\n\t}\r\n}\r\n\r\n//检查路由状态\r\nexport function checkRouterStatus() {\r\n\t//获取路由\r\n\tconst router = this.constructor.router,\r\n\t\tstatus = this.config.routerStatus;\r\n\tif(status === true && router) {\r\n\t\trouter.changeRoutereStatus(status);\r\n\t}\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/router.js","const FILTER_TRANFORM = /[\\b\\t\\r\\f\\n]/g, //过滤转义字符\r\n\t//转义双引号\r\n\tQUEST = /\"/g,\r\n\t//引入模板\r\n\tINCLUDE_ID = /<tmpl-include .*?name=(\\'|\\\")([\\s\\S]*?)\\1.*?>([\\s\\S]*?)<\\/tmpl-include>/g,\r\n\t//引入模板\r\n\tINCLUDE_FILE = /<tmpl-include .*?file=(\\'|\\\")([\\s\\S]*?)\\1.*?>([\\s\\S]*?)<\\/tmpl-include>/g,\r\n\t//空模板\r\n\tINCLUDE_NULL = /<tmpl-include\\s*?>([\\s\\S]*?)<\\/tmpl-include>/g,\r\n\t//错误的模板\r\n\tINCLUDE_ERROR = /<tmpl-include.*?>([\\s\\S]*?)<\\/tmpl-include>/g,\r\n\t//嵌入block块\r\n\tBLOCK = /<tmpl-block .*?name=(\\'|\\\")([\\s\\S]*?)\\1.*?>([\\s\\S]*?)<\\/tmpl-block>/g,\r\n\t//append_block\r\n\tBLOCK_APPEND = /^append:/,\r\n\t//inser_block\r\n\tBLOCK_INSETR = /^insert:/,\r\n\t//base路径解析\r\n\tEXTENDS = /<tmpl-extend .*?file=(\\'|\\\")([\\s\\S]*?)\\1.*?\\/>/g;\r\n\r\nexport {\r\n\tFILTER_TRANFORM,\r\n\tQUEST,\r\n\tINCLUDE_ID,\r\n\tINCLUDE_FILE,\r\n\tINCLUDE_NULL,\r\n\tINCLUDE_ERROR,\r\n\tBLOCK,\r\n\tBLOCK_APPEND,\r\n\tBLOCK_INSETR,\r\n\tEXTENDS\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/tmpl-regexp.js","/*\r\n * 一堆解析模板的方法,tmpl的核心算法\r\n * */\r\n//运行环境是否在浏览器\r\nimport inBrowser from './in_browser';\r\n//常用的方法\r\nimport Fn from './fn';\r\n//模板正则配置\r\nimport {\r\n    FILTER_TRANFORM,\r\n    QUEST,\r\n    INCLUDE_ID,\r\n    INCLUDE_FILE,\r\n    INCLUDE_NULL,\r\n    INCLUDE_ERROR,\r\n    BLOCK,\r\n    BLOCK_APPEND,\r\n    BLOCK_INSETR,\r\n    EXTENDS\r\n} from './tmpl-regexp';\r\n\r\n//html中的转义\r\nimport escapeCode from './escapeCode';\r\n\r\n//实例化常用的方法\r\nconst fn = new Fn();\r\n\r\n//在node环境中使用需要用到fs获取文件\r\nlet fs;\r\n\r\nif(!inBrowser) {\r\n\ttry{\t    \r\n\t    /*兼容webpack的写法来获取nodejs中的核心模块*/\r\n\t    fs = __non_webpack_require__('fs');\r\n\t}catch(e){\r\n\t    /*在webpack中打包出现报错问题*/\r\n\t    fs = node.fs;\r\n\t}\r\n}\r\n\r\n//由于模块接口中都是只读的，不能放在配置中；\r\nlet SCRIPT_REGEXP,\r\n\t/*原生script*/\r\n\tNATIVE_SCRIPT,\r\n\t/*输出script*/\r\n\tECHO_SCRIPT_REGEXP,\r\n\t//转义输出\r\n\tECHO_ESCAPE_REGEXP,\r\n\t/*替换输出script*/\r\n\tREPLACE_ECHO_SCRIPT_OPEN_TAG,\r\n\t//转义的开头表达式\r\n\tECHO_ESCAPE_REGEXP_OPEN_TAG,\r\n\t/*起始*/\r\n\tOPEN_TAG_REGEXP,\r\n\t/*闭合*/\r\n\tCLOSE_TAG_REGEXP;\r\n\r\n//把路由实例挂靠到模板中\r\nexport function setRouter() {\r\n\tif(fn.isObj(this.config.router))\r\n\t\tthis.constructor.router = this.config.router;\r\n}\r\n\r\n//初始化时间中的参数\r\nexport function setEvent() {\r\n\t//初始化事件\r\n\tthis.events = {};\r\n\t//设置事件类型\r\n\tthis.eventType = [];\r\n}\r\n\r\n//设置实例\r\nexport function setInstance(type) {\r\n\r\n\tconst get = this.config[type];\r\n\r\n\tif(!fn.isObj(get)) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tfn.each(get, (_get, key) => {\r\n\t\tthis[key] = _get;\r\n\t});\r\n}\r\n\r\n//处理正则数据\r\nexport function initRegExp(expr) {\r\n\tconst tm = '\\\\/*.?+$^[](){}|\\'\\\"';\r\n\tfn.each(tm, (tmItem, index) => {\r\n\t\texpr = expr.replace(new RegExp('\\\\' + tmItem, 'g'), '\\\\' + tmItem);\r\n\t});\r\n\treturn expr;\r\n}\r\n\r\n//设置正则\r\nexport function setRegExp() {\r\n\r\n\tconst open_tag = initRegExp.call(this, this.config.open_tag);\r\n\r\n\tconst close_tag = initRegExp.call(this, this.config.close_tag);\r\n\t//解析所有的表达式\r\n\tSCRIPT_REGEXP = new RegExp(open_tag + '[^=-][\\\\\\s\\\\\\S]*?' + close_tag + '|' + open_tag + '=[\\\\\\s\\\\\\S]*?' + close_tag + '|' + open_tag + '-[\\\\\\s\\\\\\S]*?' + close_tag, 'g');\r\n\t//原生的script\r\n\tNATIVE_SCRIPT = new RegExp(open_tag + '[^=-][\\\\\\s\\\\\\S]*?' + close_tag, 'g');\r\n\t//解析输出的表达式\r\n\tECHO_SCRIPT_REGEXP = new RegExp(open_tag + '=([\\\\\\s\\\\\\S]*?)' + close_tag, 'g');\r\n\t//转义输出\r\n\tECHO_ESCAPE_REGEXP = new RegExp(open_tag + '-([\\\\\\s\\\\\\S]*?)' + close_tag, 'g');\r\n\t//替换输出的开头表达式\r\n\tREPLACE_ECHO_SCRIPT_OPEN_TAG = new RegExp(open_tag + '=', 'g');\r\n\t//转义的开头表达式\r\n\tECHO_ESCAPE_REGEXP_OPEN_TAG = new RegExp(open_tag + '-', 'g');\r\n\t//替换输出的开始表达式\r\n\tOPEN_TAG_REGEXP = new RegExp(open_tag, 'g');\r\n\t//替换输出的结束表达式\r\n\tCLOSE_TAG_REGEXP = new RegExp(close_tag, 'g');\r\n}\r\n\r\n//初始化dom生成\r\nexport function setDom() {\r\n\r\n\t//node中使用block\r\n\tif(!inBrowser) {\r\n\t\treplaceBlock.call(this);\r\n\t}\r\n\r\n\t/*重新检查依赖里面有没有引入的数据*/\r\n\treplaceAlias.call(this);\r\n\r\n\t/*清除遗留的block块*/\r\n\tclearBlock.call(this);\r\n\r\n\t/*替换include中的内容*/\r\n\treplaceInclude.call(this);\r\n\r\n\t/*解析script*/\r\n\tlet script = this.template.match(SCRIPT_REGEXP);\r\n\r\n\tconst replaceScript = setSeize.call(this);\r\n\r\n\tconst echoString = replaceScript.split(/___SCRIPT___|___ECHO_SCRIPT___/);\r\n\r\n\tconst domString = [];\r\n\r\n\tif(!script) script = [];\r\n\r\n\tconst longString = echoString.length > script.length ? echoString : script;\r\n\r\n\tfn.each(echoString, (_echoString, index) => {\r\n\t\techoString[index] = \"___.push(\\\"\" + filterTransferredMeaning(_echoString) + \"\\\");\";\r\n\t});\r\n\r\n\tfn.each(script, (_string, index) => {\r\n\r\n\t\t//恢复正则的索引位置\r\n\t\tECHO_SCRIPT_REGEXP.lastIndex = 0;\r\n\t\tNATIVE_SCRIPT.lastIndex = 0;\r\n\t\tECHO_ESCAPE_REGEXP.lastIndex = 0;\r\n\r\n\t\t//处理对应表达式\r\n\t\tif(ECHO_SCRIPT_REGEXP.test(_string)) {\r\n\t\t\tscript[index] = _string.replace(REPLACE_ECHO_SCRIPT_OPEN_TAG, \"___.push(\").replace(CLOSE_TAG_REGEXP, \");\");\r\n\t\t} else if(NATIVE_SCRIPT.test(_string)) {\r\n\t\t\tscript[index] = _string.replace(OPEN_TAG_REGEXP, '').replace(CLOSE_TAG_REGEXP, '');\r\n\t\t} else if(ECHO_ESCAPE_REGEXP.test(_string)) {\r\n\t\t\tscript[index] = _string.replace(ECHO_ESCAPE_REGEXP_OPEN_TAG, \"___.push(_this_.escape(\").replace(CLOSE_TAG_REGEXP, \"));\");\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tfn.each(longString, (_longString, index) => {\r\n\t\tif(typeof echoString[index] === 'string') domString.push(echoString[index]);\r\n\t\tif(typeof script[index] === 'string') domString.push(script[index].replace(FILTER_TRANFORM, \"\"));\r\n\t});\r\n\t\r\n\tthis.dom = 'var _this_ = this,___ = [];' + domString.join('') + 'return ___.join(\"\");';\r\n};\r\n\r\n/*替换include引入的模板*/\r\nexport function replaceInclude() {\r\n\r\n\tconst include = (() => {\r\n\t\tif(inBrowser) {\r\n\t\t\t//在浏览器环境清空include[file]\r\n\t\t\treturn INCLUDE_ID;\r\n\t\t} else {\r\n\t\t\t//在node环境清空include[name]\r\n\t\t\treturn INCLUDE_FILE;\r\n\t\t}\r\n\t})();\r\n\r\n\tlet includeTmpl, includeId;\r\n\r\n\t//清空空的引入模块\r\n\tthis.template = this.template.replace(INCLUDE_NULL, '');\r\n\r\n\t//去重\r\n\tincludeTmpl = fn.unique(this.template.match(include));\r\n\tincludeId = includeTmpl.toString()\r\n\t\t.replace(include, \"$2\")\r\n\t\t.split(',');\r\n\r\n\t//找不到include//查找的id和include匹配的数量必须相同\r\n\tif(includeTmpl.length === 0 || fn.trimArr(includeId)\r\n\t\t.length === 0 ||\r\n\t\t!(includeTmpl.length > 0 &&\r\n\t\t\tincludeId.length > 0 &&\r\n\t\t\tincludeId.length === includeTmpl.length\r\n\t\t)) return;\r\n\r\n\tfn.each(includeId, (id, index) => {\r\n\t\tconst replaceIncludeRegExp = new RegExp(initRegExp.call(this, includeTmpl[index]), 'g');\r\n\t\t/*浏览器环境下执行*/\r\n\t\tif(inBrowser) {\r\n\t\t\tconst el = fn.getEl(id);\r\n\t\t\tif(el) this.template = this.template.replace(replaceIncludeRegExp, this.html(el));\r\n\t\t\t//找不到就清空原来的内容\r\n\t\t\telse this.template = this.template.replace(replaceIncludeRegExp, '');\r\n\t\t} else {\r\n\t\t\t/*node环境下执行*/\r\n\t\t\ttry {\r\n\t\t\t\tconst tmpl = fs.readFileSync(id, {\r\n\t\t\t\t\tencoding: 'UTF8'\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.template = this.template.replace(replaceIncludeRegExp, tmpl);\r\n\r\n\t\t\t} catch(e) {\r\n\t\t\t\t//找不到就清空原来的内容\r\n\t\t\t\tthis.template = this.template.replace(replaceIncludeRegExp, '');\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n    /*去掉重复的include*/\r\n\tincludeTmpl = fn.unique(this.template.match(include));\r\n    \r\n    /*查找是否还有include的引入*/\r\n\tif(includeTmpl.length > 0) replaceInclude.call(this);\r\n\t\r\n\t/*清空错误的include*/\r\n\tthis.template = this.template.replace(INCLUDE_ERROR, '');\r\n}\r\n\r\n/*替换Block块内容*/\r\nexport function replaceBlock() {\r\n\r\n\t//先设置获取include的引入模板\r\n\treplaceAlias.call(this);\r\n\r\n\tconst baseFile = fn.unique(this.template.match(EXTENDS));\r\n\r\n\t/*只获取第一个base的名字*/\r\n\tconst baseFileName = baseFile.toString()\r\n\t\t.replace(EXTENDS, \"$2\")\r\n\t\t.split(',')[0];\r\n\r\n\t/*如果不存在block的内容，直接跳出*/\r\n\tif(baseFileName === '') return;\r\n\r\n\tconst blockTmpl = fn.unique(this.template.match(BLOCK));\r\n\r\n\tlet tmpl = fs.readFileSync(baseFileName, {\r\n\t\tencoding: 'UTF8'\r\n\t});\r\n\r\n\tconst baseTmpl = tmpl.match(BLOCK);\r\n\r\n\tconst baseBlockName = baseTmpl.toString()\r\n\t\t.replace(BLOCK, \"$2\")\r\n\t\t.split(',');\r\n\r\n\tfn.each(baseBlockName, (name, index) => {\r\n\r\n\t\tconst replaceBlock = new RegExp(initRegExp.call(this, baseTmpl[index]), 'g');\r\n\r\n\t\tlet hasBlock = false;\r\n\r\n\t\tfn.each(blockTmpl, (blocktmpl, _index) => {\r\n\t\t    \r\n\t\t\tBLOCK.test(blocktmpl);\r\n\t\t\t\r\n\t\t\tconst _name = RegExp.$2,\r\n\t\t\t\tblockContent = RegExp.$3;\r\n\t\t\t\t\t\r\n\t\t\t//匹配到name的\r\n\t\t\tif(name === _name) {\r\n\t\t\t    \r\n\t\t\t\ttmpl = tmpl.replace(replaceBlock, blockContent);\r\n\t\t\t\thasBlock = true;\r\n\t\t\t\t\r\n\t\t\t} else if(BLOCK_APPEND.test(_name) && name === _name.replace(BLOCK_APPEND, '')) {\r\n\t\t\t    \r\n\t\t\t\ttmpl = tmpl.replace(replaceBlock, baseTmpl[index].replace(BLOCK, \"$3\") + blockContent);\r\n\t\t\t\thasBlock = true;\r\n\t\t\t\t\r\n\t\t\t} else if(BLOCK_INSETR.test(_name) && name === _name.replace(BLOCK_INSETR, '')) {\r\n\t\t\t    \r\n\t\t\t\ttmpl = tmpl.replace(replaceBlock, blockContent + baseTmpl[index].replace(BLOCK, \"$3\"));\r\n\t\t\t\thasBlock = true;\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tBLOCK.lastIndex = 0;\r\n\t\t});\r\n\r\n\t\t/*如果当前的block是在extends的模板中不存在，则显示默认里面的*/\r\n\t\tif(!hasBlock) {\r\n\t\t\ttmpl = tmpl.replace(replaceBlock, baseTmpl[index].replace(BLOCK, '$3'));\r\n\t\t}\r\n\t});\r\n\r\n\tthis.template = tmpl;\r\n}\r\n\r\n/*替换别名的常量*/\r\nexport function replaceAlias() {\r\n\tconst constructor = this.constructor;\r\n\tfn.each(constructor.alias, (replaceAlias, alias) => {\r\n\t\tthis.template = this.template.replace(new RegExp(initRegExp.call(this, alias), 'g'), replaceAlias);\r\n\t});\r\n}\r\n\r\n/*清除多余的block块*/\r\nexport function clearBlock() {\r\n\tthis.template = this.template.replace(EXTENDS, '').replace(BLOCK, '');\r\n}\r\n\r\n//设置占位\r\nexport function setSeize() {\r\n\tconst replaceScript = this.template\r\n\t\t.replace(ECHO_SCRIPT_REGEXP, '___ECHO_SCRIPT___')\r\n\t\t.replace(SCRIPT_REGEXP, '___SCRIPT___');\r\n\treturn replaceScript;\r\n}\r\n\r\n//过滤string中的引号\r\nexport function filterTransferredMeaning(string) {\r\n\treturn string.replace(FILTER_TRANFORM, \"\")\r\n\t\t.replace(QUEST, '\\\\\\\"');\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/tmpl/tmpl-render.js"],"sourceRoot":""}